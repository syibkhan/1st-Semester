<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;10.&nbsp;HTTP communication protocol for Sesame 2</title><link rel="stylesheet" href="openrdf.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="index.html" title="User Guide for Sesame 2.7"><link rel="up" href="index.html" title="User Guide for Sesame 2.7"><link rel="prev" href="ch09.html" title="Chapter&nbsp;9.&nbsp;Parsing/Writing RDF with Rio"><link rel="next" href="ch11.html" title="Chapter&nbsp;11.&nbsp;The SeRQL query language (revision 3.1)"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;10.&nbsp;HTTP communication protocol for Sesame 2</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch09.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch11.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="chapter-http-protocol"></a>Chapter&nbsp;10.&nbsp;HTTP communication protocol for Sesame 2</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="ch10.html#d0e1707">10.1. Protocol summary</a></span></dt><dt><span class="section"><a href="ch10.html#d0e1719">10.2. Protocol version</a></span></dt><dd><dl><dt><span class="section"><a href="ch10.html#d0e1729">10.2.1. Request examples</a></span></dt><dd><dl></dl></dd></dl></dd><dt><span class="section"><a href="ch10.html#d0e1743">10.3. Repository list</a></span></dt><dd><dl><dt><span class="section"><a href="ch10.html#d0e1761">10.3.1. Request examples</a></span></dt><dd><dl></dl></dd></dl></dd><dt><span class="section"><a href="ch10.html#d0e1775">10.4. Repository queries</a></span></dt><dd><dl><dt><span class="section"><a href="ch10.html#d0e1812">10.4.1. Requests examples</a></span></dt><dd><dl></dl></dd></dl></dd><dt><span class="section"><a href="ch10.html#d0e1848">10.5. Repository removal</a></span></dt><dd><dl><dt><span class="section"><a href="ch10.html#d0e1855">10.5.1. Request examples</a></span></dt><dd><dl></dl></dd></dl></dd><dt><span class="section"><a href="ch10.html#d0e1869">10.6. Repository statements</a></span></dt><dd><dl><dt><span class="section"><a href="ch10.html#d0e1918">10.6.1. Request examples</a></span></dt><dd><dl></dl></dd></dl></dd><dt><span class="section"><a href="ch10.html#d0e2020">10.7. Context lists</a></span></dt><dd><dl><dt><span class="section"><a href="ch10.html#d0e2038">10.7.1. Request examples</a></span></dt><dd><dl></dl></dd></dl></dd><dt><span class="section"><a href="ch10.html#d0e2052">10.8. Namespace declaration lists</a></span></dt><dd><dl><dt><span class="section"><a href="ch10.html#d0e2072">10.8.1. Request examples</a></span></dt><dd><dl></dl></dd></dl></dd><dt><span class="section"><a href="ch10.html#d0e2097">10.9. Namespace declarations</a></span></dt><dd><dl><dt><span class="section"><a href="ch10.html#d0e2111">10.9.1. Request examples</a></span></dt><dd><dl></dl></dd></dl></dd><dt><span class="section"><a href="ch10.html#d0e2147">10.10. Repository size</a></span></dt><dd><dl><dt><span class="section"><a href="ch10.html#d0e2162">10.10.1. Request examples</a></span></dt><dd><dl></dl></dd></dl></dd><dt><span class="section"><a href="ch10.html#d0e2187">10.11. Graph Store support</a></span></dt><dd><dl><dt><span class="section"><a href="ch10.html#d0e2234">10.11.1. Request examples</a></span></dt><dd><dl></dl></dd></dl></dd><dt><span class="section"><a href="ch10.html#d0e2292">10.12. Content types</a></span></dt><dt><span class="section"><a href="ch10.html#d0e2400">10.13. TODO</a></span></dt></dl></div><p>
	 The following is a description of the HTTP-based communication protocol
	 for Sesame 2. Design consideration for the protocol include the rules
	 for the REST architectural style. In brief, this means that URLs are
	 used to represent resources and that standard HTTP methods (GET, PUT,
	 etc.) are used to access these resources. Client properties such as the
	 data formats that it can process are communicated to the server using
	 HTTP headers like <span class="emphasis"><em>Accept</em></span> and are not part of the
	 URLs. This way, a resource identified by a specific URL can, for
	 example, be presented as an HTML page to a web browser and as a binary
	 content stream to a client library. For more in depth information about
	 REST see
	 <a href="http://en.wikipedia.org/wiki/REST" target="_top">http://en.wikipedia.org/wiki/REST</a>,
	 <a href="http://rest.blueoxen.net/" target="_top">http://rest.blueoxen.net/</a> and
	 <a href="http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm" target="_top">http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm</a>.
	 More information about HTTP in general and HTTP headers in particular
	 can be found in <a href="http://www.ietf.org/rfc/rfc2616.txt" target="_top">RFC
		2616 - Hypertext Transfer Protocol -- HTTP/1.1</a>.
  </p><p>
	 The Sesame 2 HTTP communication protocol is a fully compliant
	 superset of the <a href="http://www.w3.org/TR/rdf-sparql-protocol/" target="_top">SPARQL Protocol
		for RDF</a> W3C Recommendation. The current version of the
	 protocol additionally supports communication for SPARQL 1.1 Update
	 operations, as described in the <a href="http://www.w3.org/TR/sparql11-protocol/" target="_top">SPARQL 1.1
		Protocol for RDF</a> W3C Working Draft, as well as the <a href="http://www.w3.org/TR/sparql11-http-rdf-update/" target="_top">SPARQL 1.1 Graph Store HTTP Protocol</a> W3C Working Draft.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1707"></a>10.1.&nbsp;Protocol summary</h2></div></div></div><p>
		The REST architectural style implies that URLs are used to represent
		the various resources that are available on a server. This section
		gives a summary of the resources that are available from a Sesame
		server with the HTTP-methods that can be used on them. In this
		overview, &lt;SESAME_URL&gt; is used to denote the location of the
		Sesame server, e.g. <span class="emphasis"><em>http://localhost/openrdf-sesame</em></span>.
		Likewise, &lt;REP_ID&gt; denotes the ID of a specific repository
		(e.g. "mem-rdf"), and &lt;PREFIX&gt; denotes a namespace prefix
		(e.g. "rdfs").
	 </p><p>
		The following is an overview of the resources that are available
		from a Sesame server.
	 </p><pre class="screen">
&lt;SESAME_URL&gt;
  /protocol             : protocol version (GET)
  /repositories         : overview of available repositories (GET)
  /&lt;REP_ID&gt;         : query evaluation and administration tasks on 
	 a repository (GET/POST/DELETE)
	 /statements   : repository statements (GET/POST/PUT/DELETE)
	 /contexts     : context overview (GET)
	 /size         : #statements in repository (GET)
	 /rdf-graphs   : named graphs overview (GET)
	 /service  : Graph Store operations on indirectly referenced named graphs 
	 in repository (GET/PUT/POST/DELETE)
	 /&lt;NAME&gt;   : Graph Store operations on directly referenced named graphs 
		in repository (GET/PUT/POST/DELETE)
		/namespaces   : overview of namespace definitions (GET/DELETE)
		/&lt;PREFIX&gt; : namespace-prefix definition (GET/PUT/DELETE)</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1719"></a>10.2.&nbsp;Protocol version</h2></div></div></div><p>
				  The version of the protocol that the server uses to communicate over
				  HTTP is available at: &lt;SESAME_URL&gt;/protocol. The version
				  described by this chapter is "6".
				</p><p>
				  Supported methods on this URL are:
				</p><div class="itemizedlist"><ul type="disc"><li>GET: Gets the protocol version string, e.g. "1", "2", etc.</li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1729"></a>10.2.1.&nbsp;Request examples</h3></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1732"></a>10.2.1.1.&nbsp;Fetch the protocol version</h4></div></div></div><p>Request:</p><pre class="screen">
GET /openrdf-sesame/protocol HTTP/1.1
Host: localhost</pre><p>Response:</p><pre class="screen">
HTTP/1.1 200 OK
Content-Type: text/plain;charset=UTF-8
Content-Length: 1

4</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1743"></a>10.3.&nbsp;Repository list</h2></div></div></div><p>
				  An overview of the repositories that are available on a server can
				  be retrieved from &lt;SESAME_URL&gt;/repositories.
				</p><p>
				  Supported methods on this URL are:
				</p><div class="itemizedlist"><ul type="disc"><li>GET: Gets an list of available repositories, including ID,
					 title, read- and write access parameters for each listed repository.
					 The list is formatted as a tuple query result with variables "uri",
					 "id", "title", "readable" and "writable". The "uri" value gives the
					 URI/URL for the repository and the "readable" and "writable" values
					 are xsd:boolean typed literals indicating read- and write
					 permissions.</li></ul></div><p>
				  Request headers:
				</p><div class="itemizedlist"><ul type="disc"><li>'Accept': Relevant values are the
					 <a href="ch10.html#table-var-binding-formats" title="Table&nbsp;10.2.&nbsp;MIME types for variable binding formats">MIME types of supported
						variable binding formats</a>.</li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1761"></a>10.3.1.&nbsp;Request examples</h3></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1764"></a>10.3.1.1.&nbsp;Fetch the repository list</h4></div></div></div><p>Request:</p><pre class="screen">
GET /openrdf-sesame/repositories HTTP/1.1
Host: localhost
Accept: application/sparql-results+xml, */*;q=0.5</pre><p>Response:</p><pre class="screen">
HTTP/1.1 200 OK
Content-Type: application/sparql-results+xml;charset=UTF-8

&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;sparql xmlns='http://www.w3.org/2005/sparql-results#'&gt;
  &lt;head&gt;
	 &lt;variable name='uri'/&gt;
	 &lt;variable name='id'/&gt;
	 &lt;variable name='title'/&gt;
	 &lt;variable name='readable'/&gt;
	 &lt;variable name='writable'/&gt;
  &lt;/head&gt;
  &lt;results ordered='false' distinct='false'&gt;
	 &lt;result&gt;
		&lt;binding name='uri'&gt;
		  &lt;uri&gt;http://localhost/openrdf-sesame/repositories/mem-rdf&lt;/uri&gt;
		&lt;/binding&gt;
		&lt;binding name='id'&gt;
		  &lt;literal&gt;mem-rdf&lt;/literal&gt;
		&lt;/binding&gt;
		&lt;binding name='title'&gt;
		  &lt;literal&gt;Main Memory RDF repository&lt;/literal&gt;
		&lt;/binding&gt;
		&lt;binding name='readable'&gt;
		  &lt;literal datatype='http://www.w3.org/2001/XMLSchema#boolean'&gt;true&lt;/literal&gt;
		&lt;/binding&gt;
		&lt;binding name='writable'&gt;
		  &lt;literal datatype='http://www.w3.org/2001/XMLSchema#boolean'&gt;false&lt;/literal&gt;
		&lt;/binding&gt;
	 &lt;/result&gt;
  &lt;/results&gt;
&lt;/sparql&gt;</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1775"></a>10.4.&nbsp;Repository queries</h2></div></div></div><p>
				  Queries on a specific repository with ID &lt;ID&gt; can
				  be evaluated by sending requests to:
				  &lt;SESAME_URL&gt;/repositories/&lt;ID&gt;. This
				  resource represents a <span class="emphasis"><em>SPARQL query
					 endpoint</em></span>.  Both GET and POST methods are
				  supported. The GET method is preferred as it adheres to
				  the REST architectural style. The POST method should be
				  used in cases where the length of the (URL-encoded)
				  query exceeds practicable limits of proxies, servers,
				  etc. In case a POST request is used, the query
				  parameters should be send to the server as
				  www-form-urlencoded data.
				</p><p>
				  Parameters:
				</p><div class="itemizedlist"><ul type="disc"><li>
					 'query': The query to evaluate.
				  </li><li>
					 'queryLn' (optional): Specifies the query language that is used
					 for the query. Acceptable values are strings denoting the query
					 languages supported by the server, i.e. "serql" for SeRQL
					 queries and "sparql" for SPARQL queries. If not specified, the
					 server assumes the query is a SPARQL query.
				  </li><li>
					 'infer' (optional): Specifies whether inferred statements should
					 be included in the query evaluation. Inferred statements are
					 included by default. Specifying any value other than "true"
					 (ignoring case) restricts the query evluation to explicit
					 statements only.
				  </li><li>'$&lt;varname&gt;' (optional): specifies variable
					 bindings. Variables appearing in the query can be bound to a
					 specific value outside the actual query using this option. The
					 value should be an N-Triples encoded RDF value.
				  </li><li>'$&lt;timeout&gt;' (optional): specifies a maximum query execution time, in whole seconds. The value should be an integer. A setting of 0 or a negative number indicates unlimited query time (the default).
				  </li></ul></div><p>
				  Request headers:
				</p><div class="itemizedlist"><ul type="disc"><li>
					 'Accept': Relevant values are the
					 <a href="ch10.html#table-rdf-formats" title="Table&nbsp;10.1.&nbsp;MIME types for RDF formats">MIME types of supported RDF formats</a> for graph queries, the
					 <a href="ch10.html#table-var-binding-formats" title="Table&nbsp;10.2.&nbsp;MIME types for variable binding formats">MIME types of supported variable binding formats</a> for tuple queries, and the 
					 <a href="ch10.html#table-boolean-formats" title="Table&nbsp;10.3.&nbsp;MIME types for boolean result formats">MIME types of supported boolean result formats</a> for boolean queries.
				  </li><li>
					 'Content-Type': Must be equal to
					 "application/x-www-form-urlencoded" when POST requests are used.
				  </li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1812"></a>10.4.1.&nbsp;Requests examples</h3></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1815"></a>10.4.1.1.&nbsp;Evaluate a SeRQL-select query on repository "mem-ref"</h4></div></div></div><p>Request:</p><pre class="screen">
GET /openrdf-sesame/repositories/mem-rdf?query=select%20%3Cfoo:bar%3E&amp;queryLn=serql HTTP/1.1
Host: localhost
Accept: application/sparql-results+xml, */*;q=0.5</pre><p>Response:</p><pre class="screen">
HTTP/1.1 200 OK
Content-Type: application/sparql-results+xml;charset=UTF-8

&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;sparql xmlns='http://www.w3.org/2005/sparql-results#'&gt;
  &lt;head&gt;
	 &lt;variable name='&amp;lt;foo:bar&amp;gt;'/&gt;
  &lt;/head&gt;
  &lt;results ordered='false' distinct='false'&gt;
	 &lt;result&gt;
		&lt;binding name='&amp;lt;foo:bar&amp;gt;'&gt;
		  &lt;uri&gt;foo:bar&lt;/uri&gt;
		&lt;/binding&gt;
	 &lt;/result&gt;
  &lt;/results&gt;
&lt;/sparql&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1826"></a>10.4.1.2.&nbsp;Evaluate a SPARQL-construct query on repository "mem-ref"
						using a POST request</h4></div></div></div><p>Request:</p><pre class="screen">
POST /openrdf-sesame/repositories/mem-rdf HTTP/1.1
Host: localhost
Content-Type: application/x-www-form-urlencoded
Accept: application/rdf+xml, */*;q=0.5

query=construct%20{?s%20?p%20?o}%20where%20{?s%20?p%20?o}</pre><p>Response:</p><pre class="screen">
HTTP/1.1 200 OK
Content-Type: application/rdf+xml;charset=UTF-8

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"&gt;
&lt;/rdf:RDF&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1837"></a>10.4.1.3.&nbsp;Evaluate a SPARQL-ask query on repository "mem-ref"</h4></div></div></div><p>Request:</p><pre class="screen">
GET /openrdf-sesame/repositories/mem-rdf?query=ask%20{?s%20?p%20?o} HTTP/1.1
Host: localhost
Accept: text/boolean, */*;q=0.5</pre><p>Response:</p><pre class="screen">
HTTP/1.1 200 OK
Content-Type: text/boolean;charset=US-ASCII

true</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1848"></a>10.5.&nbsp;Repository removal</h2></div></div></div><p>
				  A specific repository with ID &lt;ID&gt; can be deleted
				  from the server by sending requests to:
				  &lt;SESAME_URL&gt;/repositories/&lt;ID&gt;. The DELETE
				  method should be used for this, and the request accepts
				  no parameters.
				</p><p>
				  Care should be taken with the use of this method: the
				  result of this operation is the complete removal of the
				  repository from the server, including its configuration
				  settings and (if present) data directory.
				</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1855"></a>10.5.1.&nbsp;Request examples</h3></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1858"></a>10.5.1.1.&nbsp;Remove the "mem-rdf" repository</h4></div></div></div><p>Request:</p><pre class="screen">
DELETE /openrdf-sesame/repositories/mem-rdf HTTP/1.1
Host: localhost</pre><p>Response:</p><pre class="screen">
HTTP/1.1 204 NO CONTENT</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1869"></a>10.6.&nbsp;Repository statements</h2></div></div></div><p>
				  The statements for a specific repository with ID &lt;ID&gt; are
				  available at: &lt;SESAME_URL&gt;/repositories/&lt;ID&gt;/statements
				</p><p>
				  Supported methods on this URL are:
				</p><div class="itemizedlist"><ul type="disc"><li>
					 GET: Fetches statements from the repository.
				  </li><li>
					 PUT: Updates data in the repository, replacing any existing data
					 with the supplied data. The data supplied with this request is
					 expected to contain an RDF document in
					 <a href="ch10.html#table-rdf-formats" title="Table&nbsp;10.1.&nbsp;MIME types for RDF formats">one of the supported RDF
						formats</a>.
				  </li><li>
					 DELETE: Deletes statements from the repository.
				  </li><li>
					 POST: Performs updates on the data in the
					 repository. The data supplied with this request
					 is expected to contain either an RDF document,
					 a SPARQL 1.1 Update string, or a special
					 purpose transaction document. If an RDF
					 document is supplied, the statements found in
					 the RDF document will be added to the
					 repository. If a SPARQL 1.1 Update string is
					 supplied, the update operation will be parsed
					 and executed. If a transaction document is
					 supplied, the updates specified in the
					 transaction document will be executed.
				  </li></ul></div><p>
				  Parameters:
				</p><div class="itemizedlist"><ul type="disc"><li>
					 'subj' (optional): Restricts a GET or DELETE operation to
					 statements with the specified N-Triples encoded resource as
					 subject.
				  </li><li>
					 'pred' (optional): Restricts a GET or DELETE operation to
					 statements with the specified N-Triples encoded URI as
					 predicate.
				  </li><li>
					 'obj' (optional): Restricts a GET or DELETE operation to
					 statements with the specified N-Triples encoded value as
					 object.
				  </li><li>
					 'update' (optional): Only relevant for POST
					 operations. Specifies the SPARQL 1.1 Update
					 string to be executed. The value is expected to
					 be a syntactically valid SPARQL 1.1 Update
					 string.
				  </li><li>
					 'context' (optional): If specified, restricts the operation to
					 one or more specific contexts in the repository. The value of
					 this parameter is either an N-Triples encoded URI or bnode ID,
					 or the special value 'null' which represents all context-less
					 statements. If multiple 'context' parameters are specified, the
					 request will operate on the union of all specified contexts.
					 The operation is executed on all statements that are in the
					 repository if no context is specified.
				  </li><li>
					 'infer' (optional): Specifies whether inferred statements should
					 be included in the result of GET requests. Inferred statements
					 are included by default. Specifying any value other than "true"
					 (ignoring case) restricts the request to explicit statements
					 only.
				  </li><li>
					 'baseURI' (optional): Specifies the base URI to resolve any
					 relative URIs found in uploaded data against. This parameter
					 only applies to the PUT and POST method.
				  </li></ul></div><p>
				  Request headers:
				</p><div class="itemizedlist"><ul type="disc"><li>
					 'Accept': Relevant values for GET requests are the
					 <a href="ch10.html#table-rdf-formats" title="Table&nbsp;10.1.&nbsp;MIME types for RDF formats">MIME types of supported RDF
						formats</a>.
				  </li><li>
					 'Content-Type': Must specify the encoding of any request data
					 that is sent to a server. Relevant values are the
					 <a href="ch10.html#table-rdf-formats" title="Table&nbsp;10.1.&nbsp;MIME types for RDF formats">MIME types of supported RDF
						formats</a>, "application/x-rdftransaction" for a
					 transaction document and "application/x-www-form-urlencoded" in
					 case the parameters are encoded in the request body (as opposed
					 to the being part of the request URL).
				  </li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1918"></a>10.6.1.&nbsp;Request examples</h3></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1921"></a>10.6.1.1.&nbsp;Fetch all statements from repository "mem-rdf"</h4></div></div></div><p>Request:</p><pre class="screen">
GET /openrdf-sesame/repositories/mem-rdf/statements HTTP/1.1
Host: localhost
Accept: application/rdf+xml</pre><p>Response:</p><pre class="screen">
HTTP/1.1 200 OK
Content-Type: application/rdf+xml;charset=UTF-8

[RDF/XML ENCODED RDF DATA]</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1932"></a>10.6.1.2.&nbsp;Fetch all statements from a specific context in repository "mem-rdf"</h4></div></div></div><p>Request:</p><pre class="screen">
GET /openrdf-sesame/repositories/mem-rdf/statements?context=_:n1234x5678 HTTP/1.1
Host: localhost
Accept: application/rdf+xml</pre><p>Response:</p><pre class="screen">
HTTP/1.1 200 OK
Content-Type: application/rdf+xml;charset=UTF-8

[RDF/XML ENCODED RDF DATA]</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1943"></a>10.6.1.3.&nbsp;Remove all statements from the "mem-rdf" repository</h4></div></div></div><p>Request:</p><pre class="screen">
DELETE /openrdf-sesame/repositories/mem-rdf/statements HTTP/1.1
Host: localhost</pre><p>Response:</p><pre class="screen">
HTTP/1.1 204 NO CONTENT</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1954"></a>10.6.1.4.&nbsp;Add data to the "mem-rdf" repository</h4></div></div></div><p>Request:</p><pre class="screen">
POST /openrdf-sesame/repositories/mem-rdf/statements HTTP/1.1
Host: localhost
Content-Type: application/rdf+xml;charset=UTF-8

[RDF/XML ENCODED RDF DATA]</pre><p>Response:</p><pre class="screen">
HTTP/1.1 204 NO CONTENT</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1965"></a>10.6.1.5.&nbsp;Add data to the "mem-rdf" repository, replacing any and
						all existing data</h4></div></div></div><p>Request:</p><pre class="screen">
PUT /openrdf-sesame/repositories/mem-rdf/statements HTTP/1.1
Host: localhost
Content-Type: application/rdf+xml;charset=UTF-8

[RDF/XML ENCODED RDF DATA]</pre><p>Response:</p><pre class="screen">
HTTP/1.1 204 NO CONTENT</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1976"></a>10.6.1.6.&nbsp;Add data to a specific context in the "mem-rdf"
						repository, replacing any data that is currently in this
						context</h4></div></div></div><p>Request:</p><pre class="screen">
PUT /openrdf-sesame/repositories/mem-rdf/statements?context=%3Curn:x-local:graph1%3E&amp;baseURI=%3Curn:x-local:graph1%3E HTTP/1.1
Host: localhost
Content-Type: application/x-turtle;charset=UTF-8

[TURTLE ENCODED RDF DATA]</pre><p>Response:</p><pre class="screen">
HTTP/1.1 204 NO CONTENT</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1987"></a>10.6.1.7.&nbsp;Add statements without a context to the "mem-rdf"
						repository, ignoring any context information that is
						encoded in the supplied data</h4></div></div></div><p>Request:</p><pre class="screen">
POST /openrdf-sesame/repositories/mem-rdf/statements?context=null HTTP/1.1
Host: localhost
Content-Type: application/x-turtle;charset=UTF-8

[TURTLE ENCODED RDF DATA]</pre><p>Response:</p><pre class="screen">
HTTP/1.1 204 NO CONTENT</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1998"></a>10.6.1.8.&nbsp;Perform update described in a SPARQL 1.1 Update string</h4></div></div></div><p>Request:</p><pre class="screen">
POST /openrdf-sesame/repositories/mem-rdf/statements HTTP/1.1
Host: localhost
Content-Type: application/x-www-form-urlencoded

update=INSERT%20{?s%20?p%20?o}%20WHERE%20{?s%20?p%20?o}</pre><p>Response:</p><pre class="screen">
HTTP/1.1 204 NO CONTENT</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2009"></a>10.6.1.9.&nbsp;Perform updates described in a transaction document and
						treat it as a single transaction</h4></div></div></div><p>Request:</p><pre class="screen">
POST /openrdf-sesame/repositories/mem-rdf/statements HTTP/1.1
Host: localhost
Content-Type: application/x-rdftransaction

[TRANSACTION DATA]</pre><p>Response:</p><pre class="screen">
HTTP/1.1 204 NO CONTENT</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2020"></a>10.7.&nbsp;Context lists</h2></div></div></div><p>
				  A list of resources that are used as context identifiers in a
				  repository with ID &lt;ID&gt; is available at:
				  &lt;SESAME_URL&gt;/repositories/&lt;ID&gt;/contexts
				</p><p>
				  Supported methods on this URL are:
				</p><div class="itemizedlist"><ul type="disc"><li>
					 GET: Gets a list of resources that are used as context
					 identifiers. The list is formatted as a tuple query result with
					 a single variable "contextID", which is bound to URIs and bnodes
					 that are used as context identifiers.
				  </li></ul></div><p>
				  Request headers:
				</p><div class="itemizedlist"><ul type="disc"><li>
					 'Accept': Relevant values are the
					 <a href="ch10.html#table-var-binding-formats" title="Table&nbsp;10.2.&nbsp;MIME types for variable binding formats">MIME types of
						supported variable binding formats</a>.
				  </li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2038"></a>10.7.1.&nbsp;Request examples</h3></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2041"></a>10.7.1.1.&nbsp;Fetch all context identifiers from repository "mem-rdf"</h4></div></div></div><p>Request:</p><pre class="screen">
GET /openrdf-sesame/repositories/mem-rdf/contexts HTTP/1.1
Host: localhost
Accept: application/sparql-results+xml</pre><p>Response:</p><pre class="screen">
HTTP/1.1 200 OK
Content-Type: application/sparql-results+xml

&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;sparql xmlns='http://www.w3.org/2005/sparql-results#'&gt;
  &lt;head&gt;
	 &lt;variable name='contextID'/&gt;
  &lt;/head&gt;
  &lt;results ordered='false' distinct='false'&gt;
	 &lt;result&gt;
		&lt;binding name='contextID'&gt;
		  &lt;uri&gt;urn:x-local:graph1&lt;/uri&gt;
		&lt;/binding&gt;
	 &lt;/result&gt;
  &lt;/results&gt;
&lt;/sparql&gt;</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2052"></a>10.8.&nbsp;Namespace declaration lists</h2></div></div></div><p>
				  Namespace declaration lists for a repository with ID &lt;ID&gt; are
				  available at: &lt;SESAME_URL&gt;/repositories/&lt;ID&gt;/namespaces.
				</p><p>
				  Supported methods on this URL are:
				</p><div class="itemizedlist"><ul type="disc"><li>
					 GET: Gets a list of namespace declarations that have been
					 defined for the repository. The list is formatted as a tuple
					 query result with variables "prefix" and "namespace", which are
					 both bound to literals.
				  </li><li>
					 DELETE: Removes all namespace declarations from the repository.
				  </li></ul></div><p>
				  Request headers:
				</p><div class="itemizedlist"><ul type="disc"><li>
					 'Accept': Relevant values for GET requests are the
					 <a href="ch10.html#table-var-binding-formats" title="Table&nbsp;10.2.&nbsp;MIME types for variable binding formats">MIME types of
						supported variable binding formats</a>.
				  </li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2072"></a>10.8.1.&nbsp;Request examples</h3></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2075"></a>10.8.1.1.&nbsp;Fetch all namespace declaration info</h4></div></div></div><p>Request</p><pre class="screen">
GET /openrdf-sesame/repositories/mem-rdf/namespaces HTTP/1.1
Host: localhost
Accept: application/sparql-results+xml, */*;q=0.5</pre><p>Response:</p><pre class="screen">
HTTP/1.1 200 OK
Content-Type: application/sparql-results+xml

&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;sparql xmlns='http://www.w3.org/2005/sparql-results#'&gt;
  &lt;head&gt;
	 &lt;variable name='prefix'/&gt;
	 &lt;variable name='namespace'/&gt;
  &lt;/head&gt;
  &lt;results ordered='false' distinct='false'&gt;
	 &lt;result&gt;
		&lt;binding name='prefix'&gt;
		  &lt;literal&gt;rdf&lt;/literal&gt;
		&lt;/binding&gt;
		&lt;binding name='namespace'&gt;
		  &lt;literal&gt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&lt;/literal&gt;
		&lt;/binding&gt;
	 &lt;/result&gt;
  &lt;/results&gt;
&lt;/sparql&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2086"></a>10.8.1.2.&nbsp;Remove all namespace declarations from the repository.</h4></div></div></div><p>Request:</p><pre class="screen">
DELETE /openrdf-sesame/repositories/mem-rdf/namespaces HTTP/1.1
Host: localhost</pre><p>Response:</p><pre class="screen">
HTTP/1.1 204 NO CONTENT</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2097"></a>10.9.&nbsp;Namespace declarations</h2></div></div></div><p>
				  Namespace declarations with prefix &lt;PREFIX&gt; for a
				  repository with ID &lt;ID&gt; are available at:
				  &lt;SESAME_URL&gt;/repositories/&lt;ID&gt;/namespaces/&lt;PREFIX&gt;.
				</p><p>
				  Supported methods on this URL are:
				</p><div class="itemizedlist"><ul type="disc"><li>
					 GET: Gets the namespace that has been defined for a particular
					 prefix.
				  </li><li>
					 PUT: Defines or updates a namespace declaration, mapping the
					 prefix to the namespace that is supplied in plain text in the
					 request body.
				  </li><li>
					 DELETE: Removes a namespace declaration.
				  </li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2111"></a>10.9.1.&nbsp;Request examples</h3></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2114"></a>10.9.1.1.&nbsp;Get the namespace for prefix 'rdf'</h4></div></div></div><p>Request</p><pre class="screen">
GET /openrdf-sesame/repositories/mem-rdf/namespaces/rdf HTTP/1.1
Host: localhost</pre><p>Response:</p><pre class="screen">
HTTP/1.1 200 OK
Content-Type: text/plain;charset=UTF-8

http://www.w3.org/1999/02/22-rdf-syntax-ns#</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2125"></a>10.9.1.2.&nbsp;Set the namespace for a specific prefix</h4></div></div></div><p>Request:</p><pre class="screen">
PUT /openrdf-sesame/repositories/mem-rdf/namespaces/example HTTP/1.1
Host: localhost
Content-Type: text/plain

http://www.example.com</pre><p>Response:</p><pre class="screen">
HTTP/1.1 204 NO CONTENT</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2136"></a>10.9.1.3.&nbsp;Remove the namespace for a specific prefix</h4></div></div></div><p>Request:</p><pre class="screen">
DELETE /openrdf-sesame/repositories/mem-rdf/namespaces/example HTTP/1.1
Host: localhost</pre><p>Response:</p><pre class="screen">
HTTP/1.1 204 NO CONTENT</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2147"></a>10.10.&nbsp;Repository size</h2></div></div></div><p>
				  The repository size (defined as the number of statements it
				  contains) is available at:
				  &lt;SESAME_URL&gt;/repositories/&lt;ID&gt;/size.
				</p><p>
				  Supported methods on this URL are:
				</p><div class="itemizedlist"><ul type="disc"><li>
					 GET: Gets the number of statements in a repository.
				  </li></ul></div><p>
				  Parameters:
				</p><div class="itemizedlist"><ul type="disc"><li>
					 'context' (optional): If specified, restricts the operation to
					 one or more specific contexts in the repository. The value of
					 this parameter is either an N-Triples encoded URI or bnode ID,
					 or the special value 'null' which represents all context-less
					 statements. If multiple 'context' parameters are specified, the
					 request will operate on the union of all specified contexts.
					 The operation is executed on all statements that are in the
					 repository if no context is specified.
				  </li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2162"></a>10.10.1.&nbsp;Request examples</h3></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2165"></a>10.10.1.1.&nbsp;Get the size of repository 'mem-rdf'</h4></div></div></div><p>Request</p><pre class="screen">
GET /openrdf-sesame/repositories/mem-rdf/size HTTP/1.1
Host: localhost</pre><p>Response:</p><pre class="screen">
HTTP/1.1 200 OK
Content-Type: text/plain

123456</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2176"></a>10.10.1.2.&nbsp;Get the size of a specific context in repository 'mem-rdf'</h4></div></div></div><p>Request</p><pre class="screen">
GET /openrdf-sesame/repositories/mem-rdf/size?context=%3Curn:x-local:graph1%3E HTTP/1.1
Host: localhost</pre><p>Response:</p><pre class="screen">
HTTP/1.1 200 OK
Content-Type: text/plain

4321</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2187"></a>10.11.&nbsp;Graph Store support</h2></div></div></div><p>
				  The <a href="" target="_top">SPARQL 1.1 Graph Store HTTP Protocol</a> is supported on a per-repository basis. The functionality is accessible at &lt;SESAME_URL&gt;/repositories/&lt;ID&gt;/rdf-graphs/service (for indirectly referenced named graphs), and &lt;SESAME_URL&gt;/repositories/&lt;ID&gt;/rdf-graphs/&lt;NAME&gt; (for directly referenced named graphs). A request on a directly referenced named graph entails that the request URL itself is used as the named graph identifier in the repository.
				</p><p>
				  Supported methods on these resources are:
				</p><div class="itemizedlist"><ul type="disc"><li>GET: fetches statements in the named graph from the repository.</li><li>PUT: Updates data in the named graph in the repository, replacing any existing data in the named graph with the supplied data. The data supplied with this request is expected to contain an RDF document in <a href="ch10.html#table-rdf-formats" title="Table&nbsp;10.1.&nbsp;MIME types for RDF formats">one of the supported RDF
						formats</a>.</li><li>DELETE: Delete all data in the named graph in the repository.</li><li>POST: Updates data in the named graph in the repository, adding to any existing data in the named graph with the supplied data. The data supplied with this request is expected to contain an RDF document in <a href="ch10.html#table-rdf-formats" title="Table&nbsp;10.1.&nbsp;MIME types for RDF formats">one of the supported RDF
						formats</a>.</li></ul></div><p>
				  Request headers:
				</p><div class="itemizedlist"><ul type="disc"><li>
					 'Accept': Relevant values for GET requests are the
					 <a href="ch10.html#table-rdf-formats" title="Table&nbsp;10.1.&nbsp;MIME types for RDF formats">MIME types of supported RDF
						formats</a>.
				  </li><li>
					 'Content-Type': Must specify the encoding of any request data
					 that is sent to a server. Relevant values are the
					 <a href="ch10.html#table-rdf-formats" title="Table&nbsp;10.1.&nbsp;MIME types for RDF formats">MIME types of supported RDF
						formats</a>.
				  </li></ul></div><p>
				  For requests on indirectly referenced graphs, the following parameters are supported:
				</p><div class="itemizedlist"><ul type="disc"><li>'graph' (optional): specifies the URI of the named graph to be accessed.</li><li>'default' (optional): specifies that the default graph is to be accessed. This parameter is expected to be present but have no value.</li></ul></div><p>
				  Each reqest on an indirectly referenced graph needs to specify precisely one of the above parameters.
				</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2234"></a>10.11.1.&nbsp;Request examples</h3></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2237"></a>10.11.1.1.&nbsp;Fetch all statements from a directly referenced named graph  in repository "mem-rdf"</h4></div></div></div><p>Request:</p><pre class="screen">
GET /openrdf-sesame/repositories/mem-rdf/rdf-graphs/graph1 HTTP/1.1
Host: localhost
Accept: application/rdf+xml</pre><p>Response:</p><pre class="screen">
HTTP/1.1 200 OK
Content-Type: application/rdf+xml;charset=UTF-8

[RDF/XML ENCODED RDF DATA]</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2248"></a>10.11.1.2.&nbsp;Fetch all statements from an indirectly referenced named graph  in repository "mem-rdf"</h4></div></div></div><p>Request:</p><pre class="screen">
GET /openrdf-sesame/repositories/mem-rdf/rdf-graphs/service?graph=http%3A%2F%2Fexample.org%2Fgraph1 HTTP/1.1
Host: localhost
Accept: application/rdf+xml</pre><p>Response:</p><pre class="screen">
HTTP/1.1 200 OK
Content-Type: application/rdf+xml;charset=UTF-8

[RDF/XML ENCODED RDF DATA]</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2259"></a>10.11.1.3.&nbsp;Fetch all statements from the default graph in repository "mem-rdf"</h4></div></div></div><p>Request:</p><pre class="screen">
GET /openrdf-sesame/repositories/mem-rdf/rdf-graphs/service?default HTTP/1.1
Host: localhost
Accept: application/rdf+xml</pre><p>Response:</p><pre class="screen">
HTTP/1.1 200 OK
Content-Type: application/rdf+xml;charset=UTF-8

[RDF/XML ENCODED RDF DATA]</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2270"></a>10.11.1.4.&nbsp;Add statements to a directly referenced named graph in the "mem-rdf" repository</h4></div></div></div><p>Request:</p><pre class="screen">
POST /openrdf-sesame/repositories/mem-rdf/rdf-graphs/graph1 HTTP/1.1
Host: localhost
Content-Type: application/x-turtle;charset=UTF-8

[TURTLE ENCODED RDF DATA]</pre><p>Response:</p><pre class="screen">
HTTP/1.1 204 NO CONTENT</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2281"></a>10.11.1.5.&nbsp;Clear a directly referenced named graph in the "mem-rdf" repository</h4></div></div></div><p>Request:</p><pre class="screen">
DELETE /openrdf-sesame/repositories/mem-rdf/rdf-graphs/graph1 HTTP/1.1
Host: localhost
</pre><p>Response:</p><pre class="screen">
HTTP/1.1 204 NO CONTENT</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2292"></a>10.12.&nbsp;Content types</h2></div></div></div><p>
				  The following table summarizes the MIME types for various document
				  formats that are relevant to this protocol.
				</p><div class="table"><a name="table-rdf-formats"></a><p class="title"><b>Table&nbsp;10.1.&nbsp;MIME types for RDF formats</b></p><table summary="MIME types for RDF formats" border="1"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th align="left">Format</th><th align="left">MIME type</th></tr></thead><tbody><tr><td align="left"><a href="http://www.w3.org/TR/rdf-syntax-grammar/" target="_top">RDF/XML</a></td><td align="left">application/rdf+xml</td></tr><tr><td align="left"><a href="http://www.w3.org/TR/rdf-testcases/#ntriples" target="_top">N-Triples</a></td><td align="left">text/plain</td></tr><tr><td align="left"><a href="http://www.dajobe.org/2004/01/turtle/" target="_top">Turtle</a></td><td align="left">text/turtle</td></tr><tr><td align="left"><a href="http://www.w3.org/DesignIssues/Notation3.html" target="_top">N3</a></td><td align="left">text/rdf+n3</td></tr><tr><td align="left"><a href="http://swdev.nokia.com/trix/TriX.html" target="_top">TriX</a></td><td align="left">application/trix</td></tr><tr><td align="left"><a href="http://www4.wiwiss.fu-berlin.de/bizer/TriG/Spec/" target="_top">TriG</a></td><td align="left">application/x-trig</td></tr><tr><td align="left"><a href="http://rivuli-development.com/2011/11/binary-rdf-in-sesame/" target="_top">Sesame Binary RDF</a></td><td align="left">application/x-binary-rdf</td></tr></tbody></table></div><div class="table"><a name="table-var-binding-formats"></a><p class="title"><b>Table&nbsp;10.2.&nbsp;MIME types for variable binding formats</b></p><table summary="MIME types for variable binding formats" border="1"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th align="left">Format</th><th align="left">MIME type</th></tr></thead><tbody><tr><td align="left"><a href="http://www.w3.org/TR/rdf-sparql-XMLres/" target="_top">SPARQL
								Query Results XML Format</a></td><td align="left">application/sparql-results+xml</td></tr><tr><td align="left"><a href="http://www.w3.org/TR/rdf-sparql-json-res/" target="_top">SPARQL
								Query Results JSON Format</a></td><td align="left">application/sparql-results+json</td></tr><tr><td align="left">binary RDF results table format</td><td align="left">application/x-binary-rdf-results-table</td></tr></tbody></table></div><div class="table"><a name="table-boolean-formats"></a><p class="title"><b>Table&nbsp;10.3.&nbsp;MIME types for boolean result formats</b></p><table summary="MIME types for boolean result formats" border="1"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th align="left">Format</th><th align="left">MIME type</th></tr></thead><tbody><tr><td align="left"><a href="http://www.w3.org/TR/rdf-sparql-XMLres/" target="_top">SPARQL
								Query Results XML Format</a></td><td align="left">application/sparql-results+xml</td></tr><tr><td align="left">plain text boolean result format</td><td align="left">text/boolean</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2400"></a>10.13.&nbsp;TODO</h2></div></div></div><div class="itemizedlist"><ul type="disc"><li>
					 Document HTTP error codes
				  </li><li>
					 Describe use of HEAD and OPTIONS methods
				  </li></ul></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch09.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch11.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;9.&nbsp;Parsing/Writing RDF with Rio&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;11.&nbsp;The SeRQL query language (revision 3.1)</td></tr></table></div></body></html>